{% extends 'base.html' %}

{% block titulo %}
Dashboard
{% endblock %}

{% block body %}
<style>
    table {
        font-family: Poppins, sans-serif;
        width: 100%;
        border-radius: 20px;
        border-bottom: 1px solid var(--base-variant-secondary);
        border-collapse: separate;
        border-spacing: 0;
    }

    /* New styles for table design */
    table th {
        background-color: var(--primary-color);
        color: white;
        padding: 10px;
        text-align: left;
    }

    table td {
        padding: 10px;
        text-align: left;
        overflow: hidden;
    }

    table th:not(:last-child) {
        border-right: 2px solid var(--base-variant-secondary);
    }

    table tr:nth-child(even) {
        background-color: var(--base-color-table);
    }

    table tr:not(:last-child) td {
        border-bottom: 1px solid var(--base-variant-secondary);
    }

    table td:not(:last-child) {
        border-right: 2px solid var(--base-variant-secondary);
    }

    /* Apply border-radius to the first and last rows and cells */
    table tr:first-child th:first-child {
        border-top-left-radius: 20px;
    }

    table tr:first-child th:last-child {
        border-top-right-radius: 20px;
    }

    table tr:last-child td:first-child {
        border-bottom-left-radius: 20px;
    }

    table tr:last-child td:last-child {
        border-bottom-right-radius: 20px;
    }

    table td.descricao  {
        max-width: 200px; /* Adjust as needed */
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        word-wrap: break-word;
    }

    .dashboard-nav {
        display: flex;
        justify-content: space-between;
        width: 100%;
    }

    .nome-usuario {
        background-color: var(--accent-color);
        color: var(--base-color);
        padding: 7px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        font-family: Poppins, sans-serif;
        font-size: 1rem;
        font-weight: lighter;
        font-weight: 600;
    }

    .nome-usuario button {
        background-color: transparent;
        border: 0;
    }

    .action-btns {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
</style>
<div class="container d-flex justify-content-center align-items-center">
    <div class="card p-4" style="width: 100%; max-width: 95%;">

        <h1 style="text-align: center; font-family: Rubik, sans-serif;">DASHBOARD</h1>

        <div class="dashboard-nav">

            <a href="{{ url_for('logout') }}"><button type="button" class="bg-danger nm-button">Logout</button></a>
            <div class="nome-usuario">
                <button>USUÁRIO: {{ usuario }}</button>
            </div>

        </div>

        <hr>

        <h3 style="text-align: center; font-family: Rubik, sans-serif;">EVENTOS</h3>
        <a href="{{ url_for('criar_evento') }}"> <button type="button" class="btn btn-primary nm-button"
                style="text-transform: uppercase; letter-spacing: 3px;">Criar Nova
                Tarefa</button> </a>
        <br>
        <table>
            <tr>
                <th>Nome</th>
                <th>Data</th>
                <th>Descrição</th>
                <th>Status</th>
                <th>Ações</th>
            </tr>
            {% for event in eventos %}
            <tr>
                <td style="max-width: 150px">{{ event.nome_evento }}</td>
                <td style="max-width: 70px;">{{ event.data_evento }}</td>
                <td style="max-width: 200px">{{ event.descricao }}</td>
                <td style="max-width: 100px;">{{ event.status }}</td>
                <td style="justify-content: space-between; align-items: center; height: 100%; max-width: 200px;">
                    <div class="action-btns">
                        <a href="{{ url_for('atualizar_evento', id=event.id) }}"><button type="button"
                                class="btn bg-success nm-button"
                                style="text-transform: uppercase; letter-spacing: 3px;">ATUALIZAR</button></a>

                        <a href="{{ url_for('editar_evento', id=event.id) }}"><button type="button"
                            class="btn bg-warning nm-button"
                            style="text-transform: uppercase; letter-spacing: 3px;">EDITAR</button></a>

                        <form action="{{ url_for('deletar_evento', id=event.id) }}" method="POST" style="display:inline;">
                            <button type="submit" onclick="return confirm('Você tem certeza que deseja excluir?')"
                                class="btn bg-danger nm-button"
                                style="text-transform: uppercase; letter-spacing: 3px;">EXCLUIR</button>
                        </form>
                    </div>


                </td>
            </tr>
            {% endfor %}
        </table>

    </div>
</div>

{% endblock %}